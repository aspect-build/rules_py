load("@rules_rust//rust:defs.bzl", "rust_library")

rust_library(
    name = "py",
    srcs = [
        "src/lib.rs",
        "src/pth.rs",
        "src/unpack.rs",
        "src/venv.rs",
    ],
    compile_data = [
        "src/_virtualenv.py",
        "src/activate.tmpl",
        "src/pyvenv.cfg.tmpl",
        "src/runfiles_interpreter.tmpl",
    ],
    visibility = [
        "//py/tools/unpack_bin:__pkg__",
        "//py/tools/venv_bin:__pkg__",
    ],
    deps = [
        "@crates//:itertools",
        "@crates//:miette",
        "@crates//:pathdiff",
        "@crates//:sha256",
        "@crates//:tempfile",
        "@crates//:thiserror",
        "@crates//:uv-cache",
        "@crates//:uv-distribution-filename",
        "@crates//:uv-extract",
        "@crates//:uv-install-wheel",
        "@crates//:uv-pypi-types",
        "@crates//:uv-python",
        "@crates//:uv-virtualenv",
        "@crates//:walkdir",
    ],
)
