# See https://docs.aspect.build/workflows/configuration
---
workspaces:
  - .
  - e2e/smoke
  - e2e/repository-rule-deps
  - e2e/system-interpreter
  - examples/uv_pip_compile

tasks:
  # TODO(reid): symbolic versions seem broken

  - test:
      name: test-os:linux-bzl:head
      queue: aspect-default
      hooks:
        - type: before_task
          command: |
            rm .bazelversion
            echo "USE_BAZEL_VERSION=last_green" > .bazeliskrc

  - test:
      name: test-os:linux-bzl:latest
      queue: aspect-default
      hooks:
        - type: before_task
          command: |
            rm .bazelversion
            echo "USE_BAZEL_VERSION=latest" > .bazeliskrc

  - test:
      name: test-os:linux-bzl:8
      queue: aspect-default
      hooks:
        - type: before_task
          command: |
            rm .bazelversion
            echo "USE_BAZEL_VERSION=8.2.1" > .bazeliskrc

  - test:
      name: test-os:linux-bzl:7
      queue: aspect-default
      hooks:
        - type: before_task
          command: |
            rm .bazelversion
            echo "USE_BAZEL_VERSION=7.6.1" > .bazeliskrc
